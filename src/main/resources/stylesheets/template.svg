<svg:svg xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.kite9.org/schema/adl'>
  <svg:defs>
    <svg:linearGradient id='glyph-background' x1='0%' x2='0%' y1='0%' y2='100%'>
      <svg:stop offset='0%' stop-color='#FFF' />
      <svg:stop offset='100%' stop-color='#DDD' />
    </svg:linearGradient>
    
    <svg:filter id="dropshadow" height="130%">
      <svg:feGaussianBlur in="SourceAlpha" stdDeviation="1"/> 
      <svg:feOffset dx="2" dy="2" /> 
      <svg:feColorMatrix
        type="matrix"
        values="0 0 0 0 .5
                0 0 0 0 .5
                0 0 0 0 .5
                0 0 0 1 0" />
      <svg:feMerge> 
        <svg:feMergeNode/>
        <svg:feMergeNode in="SourceGraphic"/> 
      </svg:feMerge>
    </svg:filter>
  </svg:defs>

  <template id='glyph'>
    <back style='kite9-usage: decal; kite9-type: svg; kite9-sizing: adaptive; ' class="glyph-back">
      <svg:rect x='0' y='0' width='{x1}' height='{y1}' rx='8' ry='8' style='fill: url(#glyph-background); ' />
    </back>
    <contents />
  </template>
  
  <template id='key'>
    <back style='kite9-usage: decal; kite9-type: svg;  kite9-sizing: adaptive; '>
      <svg:rect x='0' y='0' width='{x1}' height='{y1}' rx='0' ry='0' style='fill: blue; ' />
    </back>
    <contents />
  </template>

  <template id='arrow'>
    <back style='kite9-usage: decal; kite9-type: svg; kite9-sizing: adaptive; '>
      <svg:rect x='0' y='0' width='{x1}' height='{y1}' rx='4' ry='4' style='fill: black; ' />
    </back>
    <contents />
  </template>

  <template id='connection-label'>
    <back style='kite9-usage: decal; kite9-type: svg;  kite9-sizing: adaptive; '>
      <svg:rect x='0' y='0' width='{x1}' height='{y1}' rx='4' ry='4' style='fill: #ccc; ' />
    </back>
    <front style="kite9-type: text; ">
      <contents />
    </front>
  </template>

  <template id='context'>
    <back style='kite9-usage: decal; kite9-type: svg;  ' id="cback">
      <svg:rect x='0' y='0' width='{x1}' height='{y1}' rx='12' ry='12' />
    </back>
    <contents />
  </template>

  <!-- label template -->
  <template id="text-label-container">
    <svg:rect x='0' y='0' width='{x1}' height='{y1}' rx='2' ry='2' stroke="black" fill="none" stroke-width="1" />
    <text-label style="kite9-type: text; ">
      <contents />
    </text-label>
  </template>


  <!-- symbol -->
  <template id="circle">
    <svg:circle style="fill: rgb(0, 150, 73); " cx="6" cy="6" r="6" />
    <svg:text x="3" y="3" style="fill: white; font-size: 8px; alignment-baseline: center;">K</svg:text>
  </template>

  <template id="hexagon">
    <svg:rect x="0" y="0" width="10" height="10" fill="grey" />
    <svg:polygon points="0,4 6,0 12,4 12,8 6,12 0,8" style="fill: rgb(207, 36, 42);"/>
  </template>

  <template id="diamond">
    <svg:polygon points="6,0 12,6 6,12 0,6"  style="fill: rgb(237, 106, 86);" />
  </template>
  
  <template id="square">
    <svg:rect width="10" height="10" x="0" y="0"  style="fill: rgb(237, 106, 86); stroke: none" />
  </template>
  
  <template id="diagram">
    <svg:g filter="url(#dropshadow)">
      <contents />
    </svg:g>
  </template>

</svg:svg>